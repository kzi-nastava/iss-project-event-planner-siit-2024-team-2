package com.example.eventplanner.dto.order.booking;

import com.example.eventplanner.dto.event.event.EventMapper;
import com.example.eventplanner.dto.order.booking.BookingDto;
import com.example.eventplanner.dto.order.booking.BookingNoIdDto;
import com.example.eventplanner.dto.serviceproduct.ServiceMapper;
import com.example.eventplanner.model.order.Booking;

import java.util.Optional;

public class BookingMapper {
    public static BookingDto toDto(Booking booking) {
        if (booking == null)
            return null;
        return new BookingDto(
                booking.getId(),
                EventMapper.toDto(booking.getEvent()),
                ServiceMapper.toDto(booking.getService()),
                booking.getPrice(),
                booking.getDate(),
                booking.getDuration()
        );
    }

    public static BookingNoIdDto toDtoNoId(Booking booking) {
        if (booking == null)
            return null;
        return new BookingNoIdDto(
                EventMapper.toDto(booking.getEvent()),
                ServiceMapper.toDto(booking.getService()),
                booking.getPrice(),
                booking.getDate(),
                booking.getDuration()
        );
    }

    public static Booking toEntity(BookingDto dto, int depth) {
        if (dto == null || depth > 1)
            return null;
        return (Booking) new Booking(
                EventMapper.toEntity(dto.getEvent(), depth + 1),
                ServiceMapper.toEntity(dto.getService(), depth + 1),
                dto.getPrice(),
                dto.getDate(),
                dto.getDuration()).withId(dto.getId());
    }

    public static Booking toEntity(BookingNoIdDto dto, int depth) {
        if (dto == null || depth > 1)
            return null;
        return new Booking(
                EventMapper.toEntity(dto.getEvent(), depth + 1),
                ServiceMapper.toEntity(dto.getService(), depth + 1),
                dto.getPrice(),
                dto.getDate(),
                dto.getDuration());
    }
}